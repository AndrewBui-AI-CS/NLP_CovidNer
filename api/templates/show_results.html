{% extends "layout.html" %} {% block content %}

<h2 class="text-warning mt-3 text-center">Result of entity recognition</h2>
<hr />

{% for result in json_results %}
<div class="text-center">
  <!-- <img
    src="data:image/jpeg;charset=utf-8;base64,{{ img_base64 }}"
    id="result_image"
    width="800"
    height="480"
  /> -->
  <p>{{result.first_text}}</p>
  <p>{{result.result.0}}</p>
  <div id="pretty_show" class="inline-block">{{result.result.0}}</div>
</div>

<hr />
{% endfor %}

<script>
  function download(filename, text) {
    var element = document.createElement("a");
    element.setAttribute(
      "href",
      "data:text/plain;charset=utf-8," + encodeURIComponent(text)
    );
    element.setAttribute("download", filename);

    element.style.display = "none";
    document.body.appendChild(element);

    element.click();

    document.body.removeChild(element);
  }

  const list_color = ['red', 'orange', 'yellow', 'green', 'blue', 'lime', 'brown']

  function block_pretty(pretty_element, text, color) {
    var element = document.createElement("div");
    element.style.backgroundColor = color
    element.style.display = 'inline-block'
    element.style.marginLeft = '10px'
    element.style.paddingLeft = '8px'
    element.style.paddingRight = '8px'
    element.style.paddingTop = '3px'
    element.style.paddingBottom = '3px'
    element.style.borderRadius = '12px'
    element.innerHTML = text
    pretty_element.appendChild(element)
  }

  function pretty_show() {
    var pretty_element = document.getElementById('pretty_show')
    var string = pretty_element.innerHTML
    var result = string.split(' ')
    pretty_element.innerHTML = ''
    for (let rs of result) {
      let [text, type] = rs.split('-');
      switch (type) {
        case 'O': {
          block_pretty(pretty_element, text, 'brown')
          break
        }
        case 'X': {
          block_pretty(pretty_element, text, 'red')
          break
        }
        case 'B-X': {
          block_pretty(pretty_element, text, 'red')
          break
        }
        case 'I-X': {
          block_pretty(pretty_element, text, 'scarlet')
          break
        }
        case 'PATIENT_ID': {
          block_pretty(pretty_element, text, 'green')
          break
        }
        case 'B-PATIENT_ID': {
          block_pretty(pretty_element, text, 'green')
          break
        }
        case 'I-PATIENT_ID': {
          block_pretty(pretty_element, text, 'lime')
          break
        }
        case 'PERSON_NAME': {
          block_pretty(pretty_element, text, 'orange')
          break
        }
        case 'B-PERSON_NAME': {
          block_pretty(pretty_element, text, 'orange')
          break
        }
        case 'I-PERSON_NAME': {
          block_pretty(pretty_element, text, 'yellow')
          break
        }
        case 'AGE': {
          block_pretty(pretty_element, text, 'maroon')
          break
        }
        case 'B-AGE': {
          block_pretty(pretty_element, text, 'maroon')
          break
        }
        case 'I-AGE': {
          block_pretty(pretty_element, text, 'brown')
          break
        }
        case 'GENDER': {
          block_pretty(pretty_element, text, 'cyan')
          break
        }
        case 'B-GENDER': {
          block_pretty(pretty_element, text, 'cyan')
          break
        }
        case 'I-GENDER': {
          block_pretty(pretty_element, text, 'electricblue')
          break
        }
        case 'OCCUPATION': {
          block_pretty(pretty_element, text, 'plumpie')
          break
        }
        case 'B-OCCUPATION': {
          block_pretty(pretty_element, text, 'plumpie')
          break
        }
        case 'I-OCCUPATION': {
          block_pretty(pretty_element, text, 'plumvelvet')
        }
        case 'LOCATION': {
          block_pretty(pretty_element, text, 'blue')
          break
        }
        case 'B-LOCATION': {
          block_pretty(pretty_element, text, 'blue')
          break
        }
        case 'I-LOCATION': {
          block_pretty(pretty_element, text, 'lightblue')
          break
        }
        case 'ORGANIZATION': {
          block_pretty(pretty_element, text, 'gray')
          break
        }
        case 'B-ORGANIZATION': {
          block_pretty(pretty_element, text, 'gray')
          break
        }
        case 'I-ORGANIZATION': {
          block_pretty(pretty_element, text, 'silver')
          break
        }
        case 'DISEASE': {
          block_pretty(pretty_element, text, 'nightblue')
          break
        }
        case 'B-DISEASE': {
          block_pretty(pretty_element, text, 'nightblue')
          break
        }
        case 'I-DISEASE': {
          block_pretty(pretty_element, text, 'darkblue')
          break
        }
        case 'TRANSPORTATION': {
          block_pretty(pretty_element, text, 'lovelypurple')
          break
        }
        case 'B-TRANSPORTATION': {
          block_pretty(pretty_element, text, 'lovelypurple')
          break
        }
        case 'I-TRANSPORTATION': {
          block_pretty(pretty_element, text, 'neonpurple')
          break
        }
        case 'DATE': {
          block_pretty(pretty_element, text, 'magenta')
          break
        }
        case 'B-DATE': {
          block_pretty(pretty_element, text, 'magenta')
          break
        }
        case 'I-DATE': {
          block_pretty(pretty_element, text, 'pink')
          break
        }
        default: {
          block_pretty(pretty_element, text, 'white')
        }

      }
    }
  }

  document.onload = pretty_show()

  // function draw() {
  //   console.log('Drawed! ' + $(this).attr('id'));
  // }

  // $(document).ready(function () {
  //   $('div.slot').each(function (i, d) {
  //     console.log('slot found: ' + d.id);
  //     draw.call($(this));
  //   });
  // });
</script>

{% endblock %}